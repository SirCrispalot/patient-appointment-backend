# Patient Appointment Network Data Application

Thank you for inviting me to complete the AireLogic technical test.  I chose to implement the PANDA backend, as it most closely matches my experience as a backend/API developer.

## Design Choices
* Implemented as a RESTful API with appropriate use of GET, POST, PUT, PATCH, DELETE verbs
* Patients can be added, updated fetched and deleted
* Appointments can be added, updated, fetched (individually or all by patient), attended and cancelled
* A report of missed appointments can be fetched by date range, clinician and department
* FluentValidation was used for flexible and succinct request validation
* A repository layer was added to make it easier to swap out the data layer as per the requirements
* EF core in-memory database was used for integration testing.  I am aware that this database is not always an accurate reflection of SQL behaviour, and given time I would implement the integration tests with SQLite in-memory mode which is more representative.
* EF core in-memory database was also used for the API itself to enable AireLogic to get it up and running and experiment with interacting with the API through HTTP. I didn't want to complicate things by including a connection string to a real SQL database as I thought it may make it harder to get working for review.  This means that one of the requirements (data persistence during maintenance) has not strictly been fulfilled, but swapping the connection out for a proper SQL database would easily resolve this.
* There are a variety of tests to demonstrate behaviour
    * Unit tests for testing individual functions, such as the NHS number validator
    * Client tests to ensure that the HTTP response is as expected given the requests made
    * Integration tests to ensure the database is left in the correct state after a given set of operations
    * FluentAssertions was used for succinct test assertions

## Assumptions
* All patients have a known NHS number in this system's domain
* Patients can only have one appointment at any given time
* Patient deletions are soft (it is usually a legal requirement to keep patient data for a certain amount of time) but this could easily be changed
* Appointments can be cancelled but not deleted

## Interacting
* Review the various tests to understand the behaviour that has been implemented
* Run the _Panda.WebApi_ project to run the API in a browser - this will provide a Swagger/OpenAPI definition to enable simple interaction with the API

## What Next?
Some things were not completed due to time constraints:

* Timezone awareness - any date/times generated by the application (e.g. deleted date and time) are generated in UTC but no timezone information is passed to or from the API.  This needs work to implement.
* GDPR name representation - testing with special characters was not completed so behaviour is currently unknown.
* Validation - some minimal validation was added for patient creation/updating to demonstrate how this would be achieved, but it is not comprehensive.  No validation has been implemented for appointments yet.  Despite writing a postcode validator/formatter with unit tests, this was not yet called by the validation code.
* Logging - no logging has been added whatsoever, but this would absolutely be required for production use.
* Comments - I believe in using comments sparingly, but have not yet added any to this solution, which is not typical of my work.
* Refactoring unit test code - there are inconsistencies in the integration and client tests.  Sometimes, the database is seeded with data, whereas other times it is done through the API.  This may be confusing and needs refactoring for consistency and ease of understanding.
* Localisation of error messages - this was not implemented
